#第三次作业--直方图图像增强
####姓名：林袁钰
####班级：自动化66班 
####学号：21606504138

##摘要
图象增强是数字图象处理常用的技术之一。图象增强技术的目的是为了改进图象的质量,以达到赏心悦目的效果。通常要完成的工作是除去图象中的噪声,使边缘清晰以及突出图象中的某些性质等。现阶段，比较流行的图像增强技术有：灰度变换、同态滤波、直方图修正、频域滤波。本次作业便是利用直方图修正来实现图像增强。借助matlab工具，完成以下五项题目：

1. 把附件图像的直方图画出；  
2. 把所有图像进行直方图均衡；输出均衡后的图像和源图像进行比对；分析改善内容；  
3. 进一步把图像按照对源图像直方图的观察，各自自行指定不同源图像的直方图，进行直方图匹配，进行图像增强；  
4. 对elain和lena图像进行7*7的局部直方图增强；  
5. 利用直方图对图像elain和woman进行分割。
***  
##关键词
matlab、直方图、数字图像、直方图匹配、直方图局部增强、直方图分割。  
##作业内容
###1. 把附件图像的直方图画出；
* **直方图简介**  
图像直方图是反映一幅图像像素分布的统计表，其横坐标代表了图像像素的种类，可以是灰度，可以是彩色；纵坐标代表了每一个颜色值在图像中的像素总数或所占有像素个数的百分比。一个灰度级别在【0，L-1】的数字图像直方图是一个离散函数。直方图显示图像数据时会以左暗又亮的分布曲线形式呈现出来，而不是显示原图像数据，并且可以通过算法来对图像进行按比例缩小，且具有图像平移、旋转、缩放不变性等众多优点。  
* **调用函数**  
函数调用：imhist函数介绍  
利用matlab计算图像直方图函数为imhist（）；具体用法如下：  
**imhist( i )**;直接显示图像i的灰度直方图；   
**imhist（i，n）**n为指定灰度级显示直方图；  
**[count, x] = imhist( i )** 获取直方图信息，count为每一级灰度像素个数，x为灰度级，x也可以在imhist（i，x）中指定，可以通过stem（x，count）画相应直方图。  
* **实验代码**  
实验代码在附件Q1中。  
* **实验结果**  
![q1-1](./photo/Q1/figure01.png)  
![q1-2](./photo/Q1/figure02.png)  
![q1-3](./photo/Q1/figure03.png)  
![q1-4](./photo/Q1/figure04.png)  
![q1-5](./photo/Q1/figure05.png)  
![q1-6](./photo/Q1/figure06.png)  
![q1-7](./photo/Q1/figure07.png)  

###2. 把所有图像进行直方图均衡；输出均衡后的图像和源图像进行比对；分析改善内容； 
* **直方图均衡相关知识**  
直方图均衡化处理的中心思想是把原始图像的灰度直方图从比较集中的某个灰度区间变成在全部灰度范围内的均匀分布。即对图像进行非线性拉伸，重新分配图像像素值，使得一定灰度范围内的像素数量大致相同。  
* **调用函数**  
函数介绍：histeq（）函数：  
**J = histeq(I,hgram)** 将原始图像I的直方图变成用户指定的向量hgram。hgram中的各元素的值域为[0,1]。  
**J = histeq(I,n)**  指定直方图均衡后的灰度级数n，默认值为64。  
**[J,T] = histeq(I,...)**返回从能将图像I的灰度直方图变换成图像J的直方图变换T。  
* **实验代码**  
实验代码在附件Q2中。  
* **实验结果**  
注：以下图片从上到下从左到右分别为均衡前，均衡后，均衡前直方图，均衡后直方图。  
![q2-1](./photo/Q2/01.png)  
![q2-2](./photo/Q2/02.png)  
![q2-3](./photo/Q2/03.png)  
![q2-4](./photo/Q2/04.png)  
![q2-5](./photo/Q2/05.png)  
![q2-6](./photo/Q2/06.png)  
![q2-7](./photo/Q2/07.png)  
![q2-8](./photo/Q2/08.png)  
![q2-9](./photo/Q2/09.png)  
![q2-10](./photo/Q2/10.png)  
![q2-11](./photo/Q2/11.png)  
![q2-12](./photo/Q2/12.png)  
![q2-13](./photo/Q2/13.png)  
![q2-14](./photo/Q2/14.png)  
* **结果分析**  
对比输出均衡后的图像和源图像，可以发现均衡后的灰度分布更加均匀，并且占据整个灰度级范围，且图像对比度变大，灰度色调变化范围加大。从图像上直观可以感受到均衡后图像明显变亮。但也存在均衡效果不是很好的情况，如lena 1等，说明直方图均衡增强图像虽然可以达到增强图像的目的，但并不适用于所有图像。  
###3. 进一步把图像按照对源图像直方图的观察，各自自行指定不同源图像的直方图，进行直方图匹配，进行图像增强；  
* **直方图匹配有关知识**  
直方图匹配：将图像直方图以原图像的直方图作为标准做变换，使得量的图像的直方图相同或近似，即完成对两个图象的直方图都做均衡化处理，变成相同的归一化的均匀直方图，以此均匀直方图作为媒介，在对参考图像做均衡化的逆运算，以此实现图像增项的目的。 
* **调用函数**  
ind2gray()函数介绍：  
**I = ind2gray(X,map)**  
converts the image X with colormap map to a grayscale image I. ind2gray removes the hue and saturation information from the input image while retaining the luminance.  
imhist（）函数介绍：  
**imhist（i，n）**n为指定灰度级显示直方图；
* **实验代码**  
实验代码在附件Q3中。  
* **实验结果**  
![q3-1](./photo/Q3/01.png)  
![q3-2](./photo/Q3/02.png)  
![q3-3](./photo/Q3/03.png)  
![q3-4](./photo/Q3/04.png)  
![q3-5](./photo/Q3/05.png)  
![q3-6](./photo/Q3/06.png)  
![q3-7](./photo/Q3/07.png)  
![q3-8](./photo/Q3/08.png)  
![q3-9](./photo/Q3/09.png)  
![q3-10](./photo/Q3/10.png)  
![q3-11](./photo/Q3/11.png)  
![q3-12](./photo/Q3/12.png)  
![q3-13](./photo/Q3/13.png)  
![q3-14](./photo/Q3/14.png)  
![q3-15](./photo/Q3/15.png)  
![q3-16](./photo/Q3/16.png)  
![q3-17](./photo/Q3/17.png)  
![q3-18](./photo/Q3/18.png)  
![q3-19](./photo/Q3/19.png)  
![q3-20](./photo/Q3/20.png)  
* **结果分析**  
由实验结果发现，大部分的图像经过直方图匹配后，明显达到了图像增强的目的，图像效果得到改善。由此说明，可以通过直方图匹配来完成图像增强的目的。但仍有一些图像改善效果不明显，即直方图匹配并非完全适用于所有图像。  
###4. 对elain和lena图像进行7*7的局部直方图增强；
* **局部直方图增强**  
局部直方图处理技术可以用于局部增强。过程是定义一个领域，并把该区域的中心从一个像素移到另一个像素，在每个位置，计算领域中点的直方图，并且得到的不是直方图的均衡化就是规定化的变换函数，这个函数最终用于映射领域中心像素的灰度。然后领域的中心被移动到一个相邻像素位置，重复该过程，完成局部直方图处理。  
* **调用函数**  
**a(1:n,1:n)=1;** a为n*n模板，表示a矩阵第1到n行，第1到n列的所有元素，且全为1。  
**C1=wextend('2D','sym',IM11,n);**%扩展  
* **实验代码**  
实验代码在附件Q4中。
* **实验结果**  
注：图片由左到右分别为原始图和局部加强图。  
![q4-1](./photo/Q4/elain.png)  
![q4-2](./photo/Q4/lena.png) 
###5. 利用直方图对图像elain和woman进行分割。  
* **直方图分割有关知识**  
运用直方图分割的阈值方法，选取图像灰度直方图中位于凉风之间的谷值作为阈值，将一幅图像的背景和目标分割开。经典的直方图算法实现简单，但只针对少数不同类别的物体彼此灰度差别很大的情况下，才能进行有效的分割，当原始图像双峰不明显时，先对图像进行钝化或平滑处理，使之达到改善图像质量的实际应用的要求。
* **调用函数**  
**level01=graythresh(IM11);**  
%确定灰度阈值  
**bw01=im2bw(IM11,level01);**  
其中level01就是设置阈值的。此函数使用阈值变换法把灰度图像转换成为二值图像。  
* **实验代码**  
实验代码在附件Q5中。
* **实验结果**  
![q5-1](./photo/Q5/elain.png)  
![q5-2](./photo/Q5/lena.png) 
###附录 
【参考文献】  
[1]冈萨雷斯，数字图像处理第三版，北京，电子工业出版社，2011  
[2]周品，MATLAB数字图像处理，北京，清华大学出版社，2012  




